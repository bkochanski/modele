# Stopy zwrotu {#stopyzwrotu}

## Stopy zwrotu - definicje

### Stopa zwrotu brutto

Stopa zwrotu brutto (_total return_) to stosunek __zrealizowanego przychodu__ do poniesionego nakładu. 

\begin{equation}
\mathcal{R} = \frac{X_1}{X_0}
(\#eq:total-return)
\end{equation}

W przypadku inwestycji w akcje stopę zwrotu brutto za okres $t$ wyznacza się na podstawie ceny akcji $P_{t-1}$ w na początku okresu i ceny $P_t$ na końcu okresu oraz dywidendy $D_t$ wypłacanej na koniec okresu:

\begin{equation}
\mathcal{R_t} = \frac{P_t+D_t}{P_{t-1}}
(\#eq:total-return-stocks)
\end{equation}

Stopa zwrotu brutto za ostatnich $k$ okresów to iloczyn $k$ jednookresowych stóp brutto (od momentu $t-k$ do momentu $t$):

\begin{equation}
\mathcal{R_t} = \mathcal{R_t}\cdot\mathcal{R_{t-1}}\cdot\cdot\cdot\mathcal{R_{t-k+1}}
(\#eq:multiperiod-total-return-stocks)
\end{equation}

Jeżeli w badanym okresie nie ma dywidend, taka definicja wielookresowej stopy zwrotu ma łatwe uzasadnienie:

\begin{equation}
\mathcal{R_t} = \mathcal{R_t}\cdot\mathcal{R_{t-1}}\cdot\cdot\cdot\mathcal{R_{t-k+1}} = \left(\frac{P_t}{P_{t-1}}\right)\cdot\left(\frac{P_{t-1}}{P_{t-2}}\right)\cdot\cdot\cdot\left(\frac{P_{t-k+1}}{P_{t-k}}\right)=\frac{P_t}{P_{t-k}}
(\#eq:multiperiod-total-return-stocks-nodiv)
\end{equation},

jeśli natomiast w trakcie okresu pojawiają się dywidendy, taka formuła zakłada, że są one niezwłocznie inwestowane. 

### Stopa zwrotu netto

Stopa zwrotu netto (_rate of return_) to stosunek zrealizowanego __dochodu__ (zysku) do poniesionego nakładu. 

\begin{equation}
R = \frac{X_1-X_0}{X_0}
(\#eq:rate-of-return)
\end{equation}

W przypadku inwestycji w akcje, analogicznie do równania \@ref(eq:total-return-stocks):

\begin{equation}
R_t = \frac{P_t+D_t-P_{t-1}}{P_{t-1}}
(\#eq:rate-of-return-stocks)
\end{equation}

Powiązanie pomiędzy obiema stopami zwrotu jest oczywiste:
\begin{equation}
\mathcal{R} = 1+R
(\#eq:rate-of-return-stocks)
\end{equation}

### Logarytmiczna stopa zwrotu

Logarymiczna stopa zwrotu (_log return_), inaczej zwana stopą zwrotu przy kapitalizacji ciągłej, oznaczana w tym skrypcie przez $r$ może być zdefiniowana następująco:

\begin{equation}
r_t = \ln(\mathcal{R_t}) = \ln(1+R_t)
(\#eq:log-return-stocks)
\end{equation}

W przypadku braku dywidend:

\begin{equation}
r_t = \ln\left(\frac{P_t}{P_{t-1}}\right)=p_t-p_{t-1}
(\#eq:log-return-stocks2)
\end{equation}

Dla niskich stóp zwrotu wartości logarytmicznej i prostej stopy zwrotu netto są zbliżone. 

Zaletą stóp logarytmicznych jest prosta zależność pomiędzy jednookresowymi i wielookresowymi stopami zwrotu:

\begin{equation}
\begin{split}
r_t(k) = \ln\left(\mathcal{R_t(k)}\right) = \ln(\mathcal{R_t}\cdot\mathcal{R_{t-1}\cdot\cdot\cdot\mathcal{R_{t-k+1}}})=\\= \ln(\mathcal{R_t}) + ln(\mathcal{R_{t-1}}) + \cdot\cdot\cdot + \ln(\mathcal{R_{t-k+1}})=\\
=r_t + r_{t-1} + \cdot\cdot\cdot + r_{t-k+1}
\end{split}
(\#eq:multi-log-sum)
\end{equation}

## Hipotezy dotyczące dni handlu...

## Margin trading (Handel z wykorzystaniem depozytu zabezpieczającego)

<https://bossa.pl/edukacja/kontrakty-opcje/kontrakty-terminowe/depozyty>

<!--The initial margin is the ratio of initial cash on the margin account
to the purchase value of the securities. For example, in the US, the Federal Reserve imposes a minimum of 50% (can be set higher by brokers). 
-->

Wstępny depozyt zabezpieczający to stosunek początkowej gotówki na rachunku depozytowym do wartości zakupu papierów wartościowych. Na przykład Rezerwa Federalna wymaga 50% (https://www.investopedia.com/terms/i/initialmargin.asp) - brokerzy oczywiście mogą nałożyć wyższe wymogi.    

<!--The maintenance margin is the minimum required ratio of cash on the margin account and current market value of securities. Margin serves as a buffer protecting the broker against losses. Once below the maintenance level, the investor receives a margin call asking her to deposit
additional cash or liquidate some securities. If not, the broker is authorized to restore
satisfaction of margin requirements by the latter method. The leverage implied by
margining (also known as gearing, or debt-financing of trades) increases volatility
and risk, i.e. both the upside and the downside return potential increases.
-->

Właściwy depozyt zabezpieczający (tzw. depozyt utrzymania) to minimalny wymagany stosunek środków pieniężnych na rachunku zabezpieczającym do bieżącej wartości rynkowej papierów wartościowych. Depozyt służy jako bufor chroniący brokera przed stratami. Gdy spadnie poniżej poziomu utrzymania, inwestor otrzymuje wezwanie do uzupełnienia depozytu zabezpieczającego z prośbą o zdeponowanie dodatkowej gotówki lub likwidację niektórych papierów wartościowych. Jeśli nie, broker jest upoważniony do przywrócenia spełnienia wymogów depozytu zabezpieczającego tą drugą metodą. Dźwignia implikowana przez depozyt zabezpieczający ( dźwignia finansowa lub finansowanie dłużne transakcji) zwiększa zmienność i ryzyko, tj. wzrasta zarówno potencjał zwrotu w górę, jak i w dół.

(Linton, )

## Zadania

:::{.exercise #total1}
W biblijnej [przypowieści o talentach](<https://pl.wikipedia.org/wiki/Przypowie%C5%9B%C4%87_o_talentach>) trzech sług dostało: pierwszy - pięć [talentów](<https://pl.wikipedia.org/wiki/Talent_(miara)>), drugi - dwa talenty, trzeci - jeden talent. Dwóch pierwszych podwoiło stan posiadania, trzeci - ukrył i oddał jeden talent. Jakie stopy zwrotu brutto i netto osiągnęli? Jaka była łączna stopa zwrotu właściciela majątku? Ile wyniosłyby stopy zwrotu brutto i netto trzeciego sługi, gdyby na czas nieobecności właściciela oddał pieniądze na procent (20\% za cały okres) bankierom? 
:::

:::{.exercise #netvslog}
Pokaż na wykresie, że logarytmiczna stopa zwrotu jest zbliżona do prostej stopy zwrotu netto dla wartości tej drugiej pomiędzy -0,2 i 0,2.
:::

<!-- Ruppert 2.6.3
Suppose the price of a stock at times 1, 2, and 3 are P1 = 95, P2 = 103, and P3 = 98. Find r3(2).
-->

:::{.exercise #rup263}
Załóżmy, że kurs pewnej akcji w momencie 1, 2 i 3 wynosił $P_1$=95, $P_2$=103 i $P_3$ = 98. 
Znajdź $r_3(2)$.
:::

<!-- Ruppert 2.6.4
The prices and dividends of a stock are given in the table below.
(a) What is R2?
(b) What is R4(3)?
(c) What is r3?
t Pt Dt
1 52 0.2
2 54 0.2
3 53 0.2
4 59 0.25
-->

:::{.exercise #rup264}
Ceny akcji i dywidendy pewnej spółki zostały podane w poniższej tabeli.

(a) Ile wynosi $R_2$?

(b) Ile wynosi $R_4(3)$?

(c) Ile wynosi $r_3$?

```{r echo=FALSE}  
df<-data.frame(t=1:4, Pt=c(52, 54, 53, 59), Dt=c(.2, .2, .2, .25))
colnames(df)<-c("$t$", "$P_t$", "$D_t$")
knitr::kable(df)
```
:::


:::{.exercise #rtor}
Wyznacz logarytmiczną stopę zwrotu $r_1$, prostą stopę zwrotu brutto $\mathcal{R_1}$ i prostą stopę zwrotu netto $R_1$, jeżeli:

a) $R_1$ = 0,1

b) $R_1$ = -20\%

c) $r_1$ = 0,1

d) $r_1 = 0,9$

e) $\mathcal{R_1}=0,9$

f) $\mathcal{R_1}=0,99$
:::

